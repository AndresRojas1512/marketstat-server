openapi: 3.1.1

info:
  title: MarketStat API
  version: 1.0.0
  description: API for analyzing salaries in the Russian labor market.
  
servers:
  - url: http://localhost:5000/api/v1
    description: MarketStat API v1

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:

    # Auth

    LoginRequestDto:
      type: object
      properties:
        username:
          type: string
          example: "analyst_user"
        password:
          type: string
          format: password
          example: "password123"
      required: [username, password]

    RegisterUserDto:
      type: object
      properties:
        username:
          type: string
          minLength: 3
          maxLength: 100
          example: "new_analyst"
        password:
          type: string
          minLength: 8
          maxLength: 100
          format: password
          example: "password123"
        email:
          type: string
          format: email
          maxLength: 255
          example: "new_analyst@company.com"
        fullName:
          type: string
          maxLength: 255
          example: "Analyst"
        isAdmin:
          type: boolean
          default: false
      required: [username, password, email, fullName]

    UserDto:
      type: object
      properties:
        userId:
          type: integer
          format: int32
          example: 12
        username:
          type: string
          example: "analytst_user"
        email:
          type: string
          format: email
          example: "analyst@company.com"
        fullName:
          type: string
          example: "Analyst"
        isActive:
          type: boolean
        createdAt:
          type: string
          format: date-time
        lastLoginAt:
          type: ["string", "null"]
          format: date-time
      required: [userId, username, email, fullName, isActive, createdAt]
    
    AuthResponseDto:
      type: object
      properties:
        token:
          type: string
          example: "token_123"
        expiration:
          type: string
          format: date-time
        user:
          $ref: '#/components/schemas/UserDto'
      required: [token, expiration, user]

    PartialUpdateUserDto:
      type: object
      properties:
        fullName:
          type: ["string", "null"]
          minLength: 1
          maxLength: 255
          example: "Jane R. Doe"
        email:
          type: ["string", "null"]
          format: email
          maxLength: 255
          example: "jane.doe@newemail.com"

    # DimDate

    CreateDimDateDto:
      type: object
      properties:
        fullDate: 
          type: string
          format: date
          example: "2025-01-01"
      required: [fullDate]

    UpdateDimDateDto:
      type: object
      properties:
        fullDate:
          type: string
          format: date
          example: "2025-01-02"
      required: [fullDate]

    DimDateDto:
      type: object
      properties:
        dateId:
          type: integer
          format: int32
          readOnly: true
          example: 1
        fullDate:
          type: string
          format: date
          example: "2025-01-01"
        year:
          type: integer
          format: int32
          example: 2025
        quarter:
          type: integer
          format: int32
          example: 4
        month:
          type: integer
          format: int32
          example: 11
      required: [dateId, fullDate, year, quarter, month]

    # DimEducation

    CreateDimEducationDto:
      type: object
      properties:
        specialtyName:
          type: string
          maxLength: 255
          example: "Computer Science"
        specialtyCode:
          type: string
          maxLength: 255
          example: "09.03.01"
        educationLevelName:
          type: string
          maxLength: 255
          example: "Bachelor's Degree"
      required: [specialtyName, specialtyCode, educationLevelName]

    UpdateDimEducationDto:
      type: object
      properties:
        specialtyName:
          type: string
          maxLength: 255
          example: "Applied Informatics"
        specialtyCode:
          type: string
          maxLength: 255
          example: "09.03.03"
        educationLevelName:
          type: string
          maxLength: 255
          example: "Specialist Degree"
      required: [specialtyName, specialtyCode, educationLevelName]

    DimEducationDto:
      type: object
      properties:
        educationId:
          type: integer
          format: int32
          readOnly: true
          example: 45
        specialtyName:
          type: string
          example: "Computer Science"
        specialtyCode:
          type: string
          example: "09.03.01"
        educationLevelName:
          type: string
          example: "Bachelor's Degree"
      required: [educationId, specialtyName, specialtyCode, educationLevelName]

    # DimEmployee

    CreateDimEmployeeDto:
      type: object
      properties:
        employeeRefId:
          type: string
          maxLength: 255
          example: "EMP-REF-90210"
        birthDate:
          type: string
          format: date
          example: "1990-05-15"
        careerStartDate:
          type: string
          format: date
          example: "2012-06-01"
        gender:
          type: [string, "null"]
          maxLength: 50
          example: "Male"
        educationId:
          type: ["integer", "null"]
          format: int32
          minimum: 1
          example: 45
        graduationYear:
          type: ["integer", "null"]
          format: int32
          minimum: 1900
          maximum: 2100
          example: 2011
      required: [employeeRefId, birthDate, careerStartDate]

    UpdateDimEmployeeDto:
      type: object
      properties:
        employeeRefId:
          type: string
          maxLength: 255
          example: "EMP-REF-90211"
        birthDate:
          type: string
          format: date
          example: "1990-05-15"
        careerStartDate:
          type: string
          format: date
          example: "2013-01-10"
        gender:
          type: [string, "null"]
          maxLength: 50
          example: "Male"
        educationId:
          type: ["integer", "null"]
          format: int32
          minimum: 1
          example: 47
        graduationYear:
          type: ["integer", "null"]
          format: int32
          minimum: 1900
          maximum: 2100
          example: 2012
      required: [employeeRefId, birthDate, careerStartDate]

    DimEmployeeDto:
      type: object
      properties:
        employeeId:
          type: integer
          format: int32
          readOnly: true
          example: 101
        employeeRefId:
          type: string
          example: "EMP-REF-90210"
        birthDate:
          type: string
          format: date
          example: "1990-05-15"
        careerStartDate:
          type: string
          format: date
          example: "2012-06-01"
        gender:
          type: [string, "null"]
          example: "Male"
        educationId:
          type: ["integer", "null"]
          format: int32
          example: 45
        graduationYear:
          type: ["integer", "null"]
          format: int32
          example: 2011
      required: [employeeId, employeeRefId, birthDate, careerStartDate]

    PartialUpdateDimEmployeeDto:
      type: object
      properties:
        employeeRefId:
          type: ["string", "null"]
          maxLength: 255
          example: "EMP-REF-90210-A"
        careerStartDate:
          type: ["string", "null"]
          format: date
          example: "2013-01-10"
        educationId:
          type: ["integer", "null"]
          format: int32
          minimum: 1
          example: 47
        graduationYear:
          type: ["integer", "null"]
          format: int32
          minimum: 1900
          maximum: 2100
          example: 2012

    # DimIndustryField

    CreateDimIndustryFieldDto:
      type: object
      properties:
        industryFieldCode:
          type: string
          maxLength: 10
          example: "IT-DEV"
        industryFieldName:
          type: string
          maxLength: 255
          example: "Information Technology - Development"
      required: [industryFieldCode, industryFieldName]

    UpdateDimIndustryFieldDto:
      type: object
      properties:
        industryFieldCode:
          type: string
          maxLength: 10
          example: "IT-SUPPORT"
        industryFieldName:
          type: string
          maxLength: 255
          example: "Information Technology - Support"
      required: [industryFieldCode, industryFieldName]
    
    DimIndustryFieldDto:
      type: object
      properties:
        industryFieldId:
          type: integer
          format: int32
          readOnly: true
          example: 5
        industryFieldCode:
          type: string
          example: "IT"
        industryFieldName:
          type: string
          example: "Information Technology - Development"
      required: [industryFieldId, industryFieldCode, industryFieldName]

    # DimEmployer
  
    CreateDimEmployerDto:
      type: object
      properties:
        employerName:
          type: string
          maxLength: 255
          example: "StatSoft Inc."
        inn:
          type: string
          minLength: 10
          maxLength: 12
          example: "1234567890"
        ogrn:
          type: string
          minLength: 13
          maxLength: 13
          example: "1234567890123"
        kpp:
          type: string
          minLength: 9
          maxLength: 9
          example: "123456789"
        registrationDate:
          type: string
          format: date
          example: "2010-01-20"
        legalAddress:
          type: string
          example: "123 Main St, Moscow, Russia"
        contactEmail:
          type: string
          format: email
          maxLength: 255
          example: "contact@statsoft.com"
        contactPhone:
          type: string
          maxLength: 50
          example: "+7 (495) 123-45-67"
        industryFieldId:
          type: integer
          format: int32
          minimum: 1
          example: 5
      required: [employerName, inn, ogrn, kpp, registrationDate, legalAddress, contactEmail, contactPhone, industryFieldId]

    UpdateDimEmployerDto:
      type: object
      properties:
        employerName:
          type: string
          maxLength: 255
          example: "StatSoft Inc."
        inn:
          type: string
          minLength: 10
          maxLength: 12
          example: "1234567890"
        ogrn:
          type: string
          minLength: 13
          maxLength: 13
          example: "1234567890123"
        kpp:
          type: string
          minLength: 9
          maxLength: 9
          example: "123456789"
        registrationDate:
          type: string
          format: date
          example: "2010-01-20"
        legalAddress:
          type: string
          example: "123 Main St, Moscow, Russia"
        contactEmail:
          type: string
          format: email
          maxLength: 255
          example: "contact@statsoft.com"
        contactPhone:
          type: string
          maxLength: 50
          example: "+7 (495) 123-45-67"
        industryFieldId:
          type: integer
          format: int32
          minimum: 1
          example: 5
      required: [employerName, inn, ogrn, kpp, registrationDate, legalAddress, contactEmail, contactPhone, industryFieldId]

    DimEmployerDto:
      type: object
      properties:
        employerId:
          type: integer
          format: int32
          readOnly: true
          example: 201
        employerName:
          type: string
          example: "StatSoft Inc."
        inn:
          type: string
          example: "1234567890"
        ogrn:
          type: string
          example: "1234567890123"
        kpp:
          type: string
          example: "123456789"
        registrationDate:
          type: string
          format: date
          example: "2010-01-20"
        legalAddress:
          type: string
          example: "123 Main St, Moscow, Russia"
        contactEmail:
          type: string
          format: email
          example: "contact@statsoft.com"
        contactPhone:
          type: string
          example: "+7 (495) 123-45-67"
        industryFieldId:
          type: integer
          format: int32
          example: 5
        industryField:
          oneOf:
            - $ref: '#/components/schemas/DimIndustryFieldDto'
            - type: "null"
      required: [employerId, employerName, inn, ogrn, kpp, registrationDate, legalAddress, contactEmail, contactPhone, industryFieldId]

    # DimJob

    CreateDimJobDto:
      type: object
      properties:
        jobRoleTitle:
          type: string
          maxLength: 255
          example: "Java Developer"
        standardJobRoleTitle:
          type: string
          maxLength: 255
          example: "Software Engineer"
        hierarchyLevelName:
          type: string
          maxLength: 255
          example: "Middle"
        industryFieldId:
          type: integer
          format: int32
          minimum: 1
          example: 5
      required: [jobRoleTitle, standardJobRoleTitle, hierarchyLevelName, industryFieldId]

    UpdateDimJobDto:
      type: object
      properties:
        jobRoleTitle:
          type: string
          maxLength: 255
          example: "Senior Java Developer"
        standardJobRoleTitle:
          type: string
          maxLength: 255
          example: "Software Engineer"
        hierarchyLevelName:
          type: string
          maxLength: 255
          example: "Senior"
        industryFieldId:
          type: integer
          format: int32
          minimum: 1
          example: 5
      required: [jobRoleTitle, standardJobRoleTitle, hierarchyLevelName, industryFieldId]

    DimJobDto:
      type: object
      properties:
        jobId:
          type: integer
          format: int32
          readOnly: true
          example: 301
        jobRoleTitle:
          type: string
          example: "Java Developer"
        standardJobRoleTitle:
          type: string
          example: "Software Engineer"
        hierarchyLevelName:
          type: string
          example: "Middle"
        industryFieldId:
          type: integer
          format: int32
          example: 5
        industryField:
          oneOf:
            - $ref: '#/components/schemas/DimIndustryFieldDto'
            - type: "null"
      required: [jobId, jobRoleTitle, standardJobRoleTitle, hierarchyLevelName, industryFieldId]

    # DimLocation

    CreateDimLocationDto:
      type: object
      properties:
        cityName:
          type: string
          maxLength: 255
          example: "Moscow"
        oblastName:
          type: string
          maxLength: 255
          example: "Moscow"
        districtName:
          type: string
          maxLength: 255
          example: "Central Federal District"
      required: [cityName, oblastName, districtName]

    UpdateDimLocationDto:
      type: object
      properties:
        cityName:
          type: string
          maxLength: 255
          example: "Saint Petersburg"
        oblastName:
          type: string
          maxLength: 255
          example: "Leningrad"
        districtName:
          type: string
          maxLength: 255
          example: "Northwestern Federal District"
      required: [cityName, oblastName, districtName]

    DimLocationDto:
      type: object
      properties:
        locationId:
          type: integer
          format: int32
          readOnly: true
          example: 1
        cityName:
          type: string
          example: "Moscow"
        oblastName:
          type: string
          example: "Moscow"
        districtName:
          type: string
          example: "Central Federal District"
      required: [locationId, cityName, oblastName, districtName]

    # FactSalary

    SalaryFilterDto:
      type: object
      properties:
        standardJobRoleTitle:
          type: ["string", "null"]
          maxLength: 255
          example: "Software Engineer"
        hierarchyLevelName:
          type: ["string", "null"]
          maxLength: 255
          example: "Senior"
        industryFieldName:
          type: ["string", "null"]
          maxLength: 255
          example: "Information Technology"
        districtName:
          type: ["string", "null"]
          maxLength: 255
          example: "Central Federal District"
        oblastName:
          type: ["string", "null"]
          maxLength: 255
          example: "Moscow"
        cityName:
          type: ["string", "null"]
          maxLength: 255
          example: "Moscow"
        dateStart:
          type: ["string", "null"]
          format: date
          example: "2024-01-01"
        dateEnd:
          type: ["string", "null"]
          format: date
          example: "2024-12-31"
    
    CreateFactSalaryDto:
      type: object
      properties:
        dateId:
          type: integer
          format: int32
          minimum: 1
          example: 1
        locationId:
          type: integer
          format: int32
          minimum: 1
          example: 1
        employerId:
          type: integer
          format: int32
          minimum: 1
          example: 201
        jobId:
          type: integer
          format: int32
          minimum: 1
          example: 301
        employeeId:
          type: integer
          format: int32
          minimum: 1
          example: 101
        salaryAmount:
          type: number
          format: decimal
          minimum: 0.0
          example: 150000.00
      required: [dateId, locationId, employerId, jobId, employeeId, salaryAmount]
    
    UpdateFactSalaryDto:
      type: object
      properties:
        dateId:
          type: integer
          format: int32
          minimum: 1
          example: 2
        locationId:
          type: integer
          format: int32
          minimum: 1
          example: 1
        employerId:
          type: integer
          format: int32
          minimum: 1
          example: 201
        jobId:
          type: integer
          format: int32
          minimum: 1
          example: 302
        employeeId:
          type: integer
          format: int32
          minimum: 1
          example: 101
        salaryAmount:
          type: number
          format: decimal
          minimum: 0.0
          example: 155000.00
      required: [dateId, locationId, employerId, jobId, employeeId, salaryAmount]
    
    # Requests

    FactSalaryDto:
      type: object
      properties:
        salaryFactId:
          type: integer
          format: int64
          readOnly: true
          example: 10001
        dateId:
          type: integer
          format: int32
          example: 1
        locationId:
          type: integer
          format: int32
          example: 1
        employerId:
          type: integer
          format: int32
          example: 201
        jobId:
          type: integer
          format: int32
          example: 301
        employeeId:
          type: integer
          format: int32
          example: 101
        salaryAmount:
          type: number
          format: decimal
          example: 150000.00
      required: [salaryFactId, dateId, locationId, employerId, jobId, employeeId, salaryAmount]

    TimeGranularity:
      type: string
      enum:
        - Year
        - Quarter
        - Month
      default: Month
    
    PublicRolesRequestDto:
      allOf:
        - $ref: '#/components/schemas/SalaryFilterDto'
      type: object
      properties:
        minRecordCount:
          type: integer
          format: int32
          minimum: 0
          default: 10
          example: 10
    
    SalarySummaryRequestDto:
      allOf:
        - $ref: '#/components/schemas/SalaryFilterDto'
      type: object
      properties:
        targetPercentile:
          type: integer
          format: int32
          minimum: 0
          maximum: 100
          default: 90
          example: 90
    
    SalaryTimeSeriesRequestDto:
      allOf:
        - $ref: '#/components/schemas/SalaryFilterDto'
      type: object
      properties:
        granularity:
          $ref: '#/components/schemas/TimeGranularity'
        periods:
          type: integer
          format: int32
          minimum: 0
          maximum: 120
          default: 12
          example: 12

    # Payloads

    PublicRoleByLocationIndustryDto:
      type: object
      properties:
        standardJobRoleTitle:
          type: string
          example: "Data Scientist"
        averageSalary:
          type: number
          format: decimal
          example: 190000.00
        salaryRecordCount:
          type: integer
          format: int64
          example: 75
      required: [standardJobRoleTitle, averageSalary, salaryRecordCount]
    
    SalaryDistributionBucketDto:
      type: object
      properties:
        lowerBound:
          type: number
          format: decimal
          example: 100000.00
        upperBound:
          type: number
          format: decimal
          example: 110000.00
        bucketCount:
          type: integer
          format: int64
          example: 50
      required: [lowerBound, upperBound, bucketCount]
    
    SalarySummaryDto:
      type: object
      properties:
        percentile25:
          type: ["number", "null"]
          format: decimal
          example: 120000.00
        percentile50:
          type: ["number", "null"]
          format: decimal
          example: 150000.00
        percentile75:
          type: ["number", "null"]
          format: decimal
          example: 180000.00
        percentileTarget:
          type: ["number", "null"]
          format: decimal
          example: 220000.00
        averageSalary:
          type: ["number", "null"]
          format: decimal
          example: 155000.00
        totalCount:
          type: integer
          format: int64
          example: 500
      required: [totalCount]

    SalaryTimeSeriesPointDto:
      type: object
      properties:
        periodStart:
          type: string
          format: date
          example: "2024-01-01"
        avgSalary:
          type: ["number", "null"]
          format: decimal
          example: 145000.00
        salaryCountInPeriod:
          type: integer
          format: int64
          example: 42
      required: [periodStart, salaryCountInPeriod]
    
    ErrorPayload:
      type: object
      properties:
        message:
          type: string
          description: A human-readable message describing the error.
          example: "Invalid DateId."
      required:
        - message
  
  responses:
    BadRequestResponse:
      description: Bad Request - The request is malformed, contains invalid syntax, or fails validation (maps to ValidationException or ArgumentException).
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorPayload'
            
    UnauthorizedResponse:
      description: Unauthorized - The request requires authentication, and the JWT is missing or invalid (maps to AuthenticationException).
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorPayload'
            
    ForbiddenResponse:
      description: Forbidden - The authenticated user does not have the necessary role or permission to perform this action.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorPayload'
            
    NotFoundResponse:
      description: Not Found - The requested resource does not exist (maps to NotFoundException).
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorPayload'
            
    ConflictResponse:
      description: Conflict - The request could not be completed due to a conflict with the current state of the resource (maps to ConflictException).
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorPayload'

security:
  - bearerAuth: []

tags:
  - name: Auth
  - name: DimDate
  - name: DimEducation
  - name: DimEmployee
  - name: DimEmployer
  - name: DimIndustryField
  - name: DimJob
  - name: DimLocation
  - name: FactSalary




paths:

  # Auth
  
  /auth/register:
    post:
      tags:
        - Auth
      summary: Register a new user
      description: Creates a new user account. Public endpoint.
      security: []
      requestBody:
        description: The registration details for the new user.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterUserDto'
      responses:
        '201':
          description: User registered successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'
        '500':
          description: Internal server error.
  
  /auth/login:
    post:
      tags:
        - Auth
      summary: Logs in an existing user
      description: Authenticates a user and returns a JWT token and user details. This endpoint is public.
      security: []
      requestBody:
        description: The login credentials for the user.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequestDto'
      responses:
        '200':
          description: Authentication successful.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponseDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '500':
          description: Internal server error.
  
  # /auth/profile/me:
  #   patch:
  #     tags:
  #       - Auth
  #     summary: Partially updates the current user's profile
  #     description: "Allows an authenticated user to update their own profile information (FullName, Email). The user is identified by their JWT."
  #     security:
  #       - bearerAuth: []
  #     requestBody:
  #       description: The fields to update on the user's profile.
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/PartialUpdateUserDto'
  #     responses:
  #       '200':
  #         description: The user profile was updated successfully.
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/UserDto'
  #       '400':
  #         $ref: '#/components/responses/BadRequestResponse'
  #       '401':
  #         $ref: '#/components/responses/UnauthorizedResponse'
  #       '404':
  #         $ref: '#/components/responses/NotFoundResponse'
  #       '409':
  #         description: "Conflict - The request could not be completed (e.g., the new email is already taken)."
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/ErrorPayload'
  
  # DimDate

  /dimdates:
    get:
      tags:
        - DimDate
      summary: Get all dates
      description: "Returns a list of all date dimensions. Requires 'Admin' role."
      security:
        - bearerAuth: []
      responses:
        '200':
          description: A list of all date records.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DimDateDto'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '500':
          description: Internal server error.

    post:
      tags:
        - DimDate
      summary: Creates a new date
      description: "Creates a new date dimension record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      requestBody:
        description: The date to create.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDimDateDto'
      responses:
        '201':
          description: The date was created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimDateDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'
        '500':
          description: Internal server error.

  /dimdates/{id}:
    get:
      tags:
        - DimDate
      summary: Get a single date by ID
      description: "Returns a single date by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the date.
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: The requested date record.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimDateDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '500':
          description: Internal server error.

    put:
      tags:
        - DimDate
      summary: Updates an existing date
      description: "Fully updates an existing date record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the date to update.
          schema:
            type: integer
            format: int32
      requestBody:
        description: The updated date information.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDimDateDto'
      responses:
        '204':
          description: The date was updated successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'
    
    delete:
      tags:
        - DimDate
      summary: Deletes a date
      description: "Deletes a date record by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the date to delete.
          schema:
            type: integer
            format: int32
      responses:
        '204':
          description: The date was deleted successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'

  # DimEducation

  /dimeducations:
    get:
      tags:
        - DimEducation
      summary: Get all educations
      description: "Returns a list of all education dimensions. Requires 'Admin' role."
      security:
        - bearerAuth: []
      responses:
        '200':
          description: A list of all education records.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DimEducationDto'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '500':
          description: Internal server error.

    post:
      tags:
        - DimEducation
      summary: Creates a new education
      description: "Creates a new education dimension record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      requestBody:
        description: The education to create.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDimEducationDto'
      responses:
        '201':
          description: The education was created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimEducationDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'
        '500':
          description: Internal server error.
    
  /dimeducations/{id}:
    get:
      tags:
        - DimEducation
      summary: Get a single education by ID
      description: "Returns a single education by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the education.
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: The requested education record.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimEducationDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '500':
          description: Internal server error.
    put:
      tags:
        - DimEducation
      summary: Updates an existing education
      description: "Fully updates an existing education record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the education to update.
          schema:
            type: integer
            format: int32
      requestBody:
        description: The updated education information.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDimEducationDto'
      responses:
        '204':
          description: The education was updated successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'
    
    delete:
      tags:
        - DimEducation
      summary: Deletes an education
      description: "Deletes an education record by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the education to delete.
          schema:
            type: integer
            format: int32
      responses:
        '204':
          description: The education was deleted successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'

  # DimEmployee

  /dimemployees:
    get:
      tags:
        - DimEmployee
      summary: Returns all employees
      description: "Retrieves a list of all employee dimensions. Requires 'Admin' role."
      security:
        - bearerAuth: []
      responses:
        '200':
          description: A list of all employee records.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DimEmployeeDto'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '500':
          description: Internal server error.

    post:
      tags:
        - DimEmployee
      summary: Creates a new employee
      description: "Creates a new employee dimension record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      requestBody:
        description: The employee to create.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDimEmployeeDto'
      responses:
        '201':
          description: The employee was created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimEmployeeDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'

  /dimemployees/{id}:
    get:
      tags:
        - DimEmployee
      summary: Get a single employee by ID
      description: "Returns a single employee by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the employee.
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: The requested employee record.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimEmployeeDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
    
    put:
      tags:
        - DimEmployee
      summary: Updates an existing employee
      description: "Fully updates an existing employee record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the employee to update.
          schema:
            type: integer
            format: int32
      requestBody:
        description: The updated employee information.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDimEmployeeDto'
      responses:
        '204':
          description: The employee was updated successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'
    
    patch:
      tags:
        - DimEmployee
      summary: Partially updates an employee
      description: "Partially updates an existing employee. Only fields provided in the request body will be changed. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the employee to update.
          schema:
            type: integer
            format: int32
      requestBody:
        description: The fields to update on the employee. At least one field must be provided.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PartialUpdateDimEmployeeDto'
      responses:
        '204':
          description: The employee was updated successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'
    
    delete:
      tags:
        - DimEmployee
      summary: Deletes an employee
      description: "Deletes an employee record by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the employee to delete.
          schema:
            type: integer
            format: int32
      responses:
        '204':
          description: The employee was deleted successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'

  # DimEmployer

  /dimemployers:
    get:
      tags:
        - DimEmployer
      summary: Get all employers
      description: "Returns a list of all employer dimensions. Requires 'Admin' role."
      security:
        - bearerAuth: []
      responses:
        '200':
          description: A list of all employer records.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DimEmployerDto'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'

    post:
      tags:
        - DimEmployer
      summary: Creates a new employer
      description: "Creates a new employer dimension record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      requestBody:
        description: The employer to create.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDimEmployerDto'
      responses:
        '201':
          description: The employer was created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimEmployerDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'

  /dimemployers/{id}:
    get:
      tags:
        - DimEmployer
      summary: Get a single employer by ID
      description: "Returns a single employer by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the employer.
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: The requested employer record.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimEmployerDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'

    put:
      tags:
        - DimEmployer
      summary: Updates an existing employer
      description: "Fully updates an existing employer record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the employer to update.
          schema:
            type: integer
            format: int32
      requestBody:
        description: The updated employer information.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDimEmployerDto'
      responses:
        '204':
          description: The employer was updated successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'

    delete:
      tags:
        - DimEmployer
      summary: Deletes an employer
      description: "Deletes an employer record by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the employer to delete.
          schema:
            type: integer
            format: int32
      responses:
        '204':
          description: The employer was deleted successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'
  
  # DimIndustryField

  /dimindustryfields:
    get:
      tags:
        - DimIndustryField
      summary: Get all industry fields
      description: "Returns a list of all industry field dimensions. Requires 'Admin' role."
      security:
        - bearerAuth: []
      responses:
        '200':
          description: A list of all industry field records.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DimIndustryFieldDto'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '500':
          description: Internal server error.

    post:
      tags:
        - DimIndustryField
      summary: Creates a new industry field
      description: "Creates a new industry field dimension record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      requestBody:
        description: The industry field to create.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDimIndustryFieldDto'
      responses:
        '201':
          description: The industry field was created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimIndustryFieldDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'

  /dimindustryfields/{id}:
    get:
      tags:
        - DimIndustryField
      summary: Get a single industry field by ID
      description: "Returns a single industry field by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the industry field.
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: The requested industry field record.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimIndustryFieldDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '500':
          description: Internal server error.

    put:
      tags:
        - DimIndustryField
      summary: Updates an existing industry field
      description: "Fully updates an existing industry field record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the industry field to update.
          schema:
            type: integer
            format: int32
      requestBody:
        description: The updated industry field information.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDimIndustryFieldDto'
      responses:
        '204':
          description: The industry field was updated successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'

    delete:
      tags:
        - DimIndustryField
      summary: Deletes an industry field
      description: "Deletes an industry field record by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the industry field to delete.
          schema:
            type: integer
            format: int32
      responses:
        '204':
          description: The industry field was deleted successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'
        '500':
          description: Internal server error.

  /dimjobs:
    get:
      tags:
        - DimJob
      summary: Get all jobs
      description: "Returns a list of all job dimensions. Requires 'Admin' role."
      security:
        - bearerAuth: []
      responses:
        '200':
          description: A list of all job records.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DimJobDto'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
    
    post:
      tags:
        - DimJob
      summary: Creates a new job
      description: "Creates a new job dimension record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      requestBody:
        description: The job to create.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDimJobDto'
      responses:
        '201':
          description: The job was created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimJobDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'

  /dimjobs/{id}:
    get:
      tags:
        - DimJob
      summary: Get a single job by ID
      description: "Returns a single job by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the job.
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: The requested job record.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimJobDto'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'

    put:
      tags:
        - DimJob
      summary: Updates an existing job
      description: "Fully updates an existing job record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the job to update.
          schema:
            type: integer
            format: int32
      requestBody:
        description: The updated job information.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDimJobDto'
      responses:
        '204':
          description: The job was updated successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'
    
    delete:
      tags:
        - DimJob
      summary: Deletes a job
      description: "Deletes a job record by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the job to delete.
          schema:
            type: integer
            format: int32
      responses:
        '204':
          description: The job was deleted successfully. No content returned.
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
  
  /dimjobs/lookup/standard-roles:
    get:
      tags:
        - DimJob
      summary: Get distinct standard job roles
      description: "Returns a list of unique standard job roles, optionally filtered by an industry ID. This endpoint is public."
      security: []
      parameters:
        - name: industryFieldId
          in: query
          description: "Optional industry ID to filter roles by."
          required: false
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: A list of standard job role strings.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                example: ["Software Engineer", "Data Scientist", "Product Manager"]

  /dimjobs/lookup/hierarchy-levels:
    get:
      tags:
        - DimJob
      summary: Get distinct hierarchy levels
      description: "Returns a list of unique hierarchy levels, optionally filtered by industry ID and/or standard job role. This endpoint is public."
      security: []
      parameters:
        - name: industryFieldId
          in: query
          description: "Optional industry ID to filter by."
          required: false
          schema:
            type: integer
            format: int32
        - name: standardJobRoleTitle
          in: query
          description: "Optional standard job role to filter by."
          required: false
          schema:
            type: string
      responses:
        '200':
          description: A list of hierarchy level strings.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                example: ["Junior", "Middle", "Senior", "Lead"]

  # DimLocation

  /dimlocations:
    get:
      tags:
        - DimLocation
      summary: Get all locations
      description: "Returns a list of all location dimensions. Requires 'Admin' role."
      security:
        - bearerAuth: []
      responses:
        '200':
          description: A list of all location records.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DimLocationDto'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
    
    post:
      tags:
        - DimLocation
      summary: Creates a new location
      description: "Creates a new location dimension record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      requestBody:
        description: The location to create.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDimLocationDto'
      responses:
        '201':
          description: The location was created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimLocationDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'

  /dimlocations/{id}:
    get:
      tags:
        - DimLocation
      summary: Get a single location by ID
      description: "Returns a single location by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the location.
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: The requested location record.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DimLocationDto'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
      
    put:
      tags:
        - DimLocation
      summary: Updates an existing location
      description: "Fully updates an existing location record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the location to update.
          schema:
            type: integer
            format: int32
      requestBody:
        description: The updated location information.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDimLocationDto'
      responses:
        '204':
          description: The location was updated successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'
    
    delete:
      tags:
        - DimLocation
      summary: Deletes a location
      description: "Deletes a location record by its unique ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the location to delete.
          schema:
            type: integer
            format: int32
      responses:
        '204':
          description: The location was deleted successfully. No content returned.
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
    
  /dimlocations/lookup/districts:
    get:
      tags:
        - DimLocation
      summary: Get distinct districts
      description: "Returns a list of all unique district names. This endpoint is public."
      security: []
      responses:
        '200':
          description: A list of district name strings.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                example: ["Central Federal District", "Volga Federal District"]

  /dimlocations/lookup/oblasts:
    get:
      tags:
        - DimLocation
      summary: Get distinct oblasts by district
      description: "Returns a list of unique oblasts, filtered by a district name. This endpoint is public."
      security: []
      parameters:
        - name: districtName
          in: query
          description: "The name of the district to filter by."
          required: true
          schema:
            type: string
            example: "Central Federal District"
      responses:
        '200':
          description: A list of oblast name strings.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                example: ["Moscow", "Moscow Oblast"]

  /dimlocations/lookup/cities:
    get:
      tags:
        - DimLocation
      summary: Get distinct cities by oblast
      description: "Returns a list of unique cities, filtered by an oblast name. This endpoint is public."
      security: []
      parameters:
        - name: oblastName
          in: query
          description: "The name of the oblast to filter by."
          required: true
          schema:
            type: string
            example: "Moscow"
      responses:
        '200':
          description: A list of city name strings.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                example: ["Moscow", "Zelenograd"]

  # FactSalary

  /factsalaries:
    post:
      tags:
        - FactSalary
      summary: Creates a new salary fact record
      description: "Adds a new salary fact record to the database. Requires 'Admin' role."
      security:
        - bearerAuth: []
      requestBody:
        description: The salary fact record to create.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateFactSalaryDto'
      responses:
        '201':
          description: The salary fact was created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FactSalaryDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          description: "Not Found. One of the foreign keys (e.g., dateId, locationId) does not exist."
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorPayload'
        '409':
          $ref: '#/components/responses/ConflictResponse'

  /factsalaries/{id}:
    get:
      tags:
        - FactSalary
      summary: Gets a specific salary fact by ID
      description: "Gets a specific salary fact record by its ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the salary fact.
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: The requested salary fact record.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FactSalaryDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'

    put:
      tags:
        - FactSalary
      summary: Updates an existing salary fact record
      description: "Fully updates an existing salary fact record. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the salary fact to update.
          schema:
            type: integer
            format: int64
      requestBody:
        description: The updated salary fact information.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateFactSalaryDto'
      responses:
        '204':
          description: The salary fact was updated successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictResponse'

    delete:
      tags:
        - FactSalary
      summary: Deletes a salary fact record
      description: "Deletes a salary fact record by its ID. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The unique ID of the salary fact to delete.
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: The salary fact was deleted successfully. No content returned.
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
        '404':
          $ref: '#/components/responses/NotFoundResponse'

  /factsalaries/byfilter:
    get:
      tags:
        - FactSalary
      summary: Gets salary fact records by filter
      description: "Gets raw salary fact records based on filter criteria. Requires 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: standardJobRoleTitle
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/standardJobRoleTitle'
        - name: hierarchyLevelName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/hierarchyLevelName'
        - name: industryFieldName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/industryFieldName'
        - name: districtName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/districtName'
        - name: oblastName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/oblastName'
        - name: cityName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/cityName'
        - name: dateStart
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/dateStart'
        - name: dateEnd
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/dateEnd'
      responses:
        '200':
          description: A list of salary fact records matching the filter.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FactSalaryDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'
  
  /factsalaries/distribution:
    get:
      tags:
        - FactSalary
      summary: Get salary distribution
      description: "Calculates histogram buckets for salary distribution. Requires 'Analyst' or 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: standardJobRoleTitle
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/standardJobRoleTitle'
        - name: hierarchyLevelName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/hierarchyLevelName'
        - name: industryFieldName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/industryFieldName'
        - name: districtName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/districtName'
        - name: oblastName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/oblastName'
        - name: cityName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/cityName'
        - name: dateStart
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/dateStart'
        - name: dateEnd
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/dateEnd'
      responses:
        '200':
          description: A list of salary distribution buckets.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SalaryDistributionBucketDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'

  /factsalaries/summary:
    get:
      tags:
        - FactSalary
      summary: Get salary summary statistics
      description: "Calculates summary statistics (avg, count, percentiles) for a given filter set. Requires 'Analyst' or 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: standardJobRoleTitle
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/standardJobRoleTitle'
        - name: hierarchyLevelName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/hierarchyLevelName'
        - name: industryFieldName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/industryFieldName'
        - name: districtName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/districtName'
        - name: oblastName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/oblastName'
        - name: cityName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/cityName'
        - name: dateStart
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/dateStart'
        - name: dateEnd
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/dateEnd'
        - name: targetPercentile
          in: query
          schema:
            $ref: '#/components/schemas/SalarySummaryRequestDto/properties/targetPercentile'
      responses:
        '200':
          description: Salary summary report.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SalarySummaryDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'

  /factsalaries/timeseries:
    get:
      tags:
        - FactSalary
      summary: Get salary time series
      description: "Calculates average salary over time. Requires 'Analyst' or 'Admin' role."
      security:
        - bearerAuth: []
      parameters:
        - name: standardJobRoleTitle
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/standardJobRoleTitle'
        - name: hierarchyLevelName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/hierarchyLevelName'
        - name: industryFieldName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/industryFieldName'
        - name: districtName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/districtName'
        - name: oblastName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/oblastName'
        - name: cityName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/cityName'
        - name: dateStart
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/dateStart'
        - name: dateEnd
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/dateEnd'
        - name: granularity
          in: query
          schema:
            $ref: '#/components/schemas/TimeGranularity'
        - name: periods
          in: query
          schema:
            $ref: '#/components/schemas/SalaryTimeSeriesRequestDto/properties/periods'
      responses:
        '200':
          description: A list of time series data points.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SalaryTimeSeriesPointDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedResponse'
        '403':
          $ref: '#/components/responses/ForbiddenResponse'

  /factsalaries/public/roles:
    get:
      tags:
        - FactSalary
      summary: Get public role statistics
      description: "A public endpoint to get average salaries for top job roles, filtered by location and industry. Hides results with low record counts."
      security: []
      parameters:
        - name: standardJobRoleTitle
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/standardJobRoleTitle'
        - name: hierarchyLevelName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/hierarchyLevelName'
        - name: industryFieldName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/industryFieldName'
        - name: districtName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/districtName'
        - name: oblastName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/oblastName'
        - name: cityName
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/cityName'
        - name: dateStart
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/dateStart'
        - name: dateEnd
          in: query
          schema:
            $ref: '#/components/schemas/SalaryFilterDto/properties/dateEnd'
        - name: minRecordCount
          in: query
          schema:
            $ref: '#/components/schemas/PublicRolesRequestDto/properties/minRecordCount'
      responses:
        '200':
          description: A list of top roles and their average salaries.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PublicRoleByLocationIndustryDto'
        '400':
          $ref: '#/components/responses/BadRequestResponse'
